{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../Dataservice/dataservice.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction TFileComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵlistener(\"click\", function TFileComponent_span_2_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.fileDownLoad.emit(ctx_r8.file.name));\n    });\n    i0.ɵɵelementStart(1, \"span\", 10);\n    i0.ɵɵtext(2, \" file_download\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Download \", ctx_r0.file.name, \" folder.\");\n  }\n}\nfunction TFileComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1, \" folder\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TFileComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.fileIcon, \" \");\n  }\n}\nfunction TFileComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function TFileComponent_div_5_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.fileDownLoad.emit(ctx_r12.file));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate2(\"title\", \"Download '\", ctx_r10.file.name, \"' - \", ctx_r10.file.size, \" bytes\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r10.file.name, \" \");\n  }\n}\nfunction TFileComponent_div_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function TFileComponent_div_5_div_2_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.changeFolder.emit(ctx_r14.file.name));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Go to folder '\", ctx_r11.file.name, \"'\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.file.name, \" \");\n  }\n}\nconst _c0 = a0 => ({\n  \"mouseOnDeleteIcon\": a0\n});\nfunction TFileComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, TFileComponent_div_5_div_1_Template, 2, 3, \"div\", 13)(2, TFileComponent_div_5_div_2_Template, 2, 2, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r3.deleteHoverActive == true));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.file.isFolder);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.file.isFolder);\n  }\n}\nfunction TFileComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function TFileComponent_div_6_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.newFolderName = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\")(3, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function TFileComponent_div_6_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.createNewFolder.emit(ctx_r18.newFolderName));\n    });\n    i0.ɵɵtext(4, \"Create\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function TFileComponent_div_6_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.cancelNewFolder.emit());\n    });\n    i0.ɵɵtext(6, \"Cancel\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.newFolderName);\n  }\n}\nfunction TFileComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"title\", \"\", ctx_r5.file.size, \" bytes\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r5.file.size > 0 ? ctx_r5.fileSizeStr(ctx_r5.file.size) : \"\");\n  }\n}\nconst _c1 = () => [];\nconst _c2 = () => ({\n  dateStyle: \"short\",\n  timeStyle: \"short\"\n});\nfunction TFileComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r6.file.createdOn.toLocaleString(i0.ɵɵpureFunction0(1, _c1), i0.ɵɵpureFunction0(2, _c2)));\n  }\n}\nfunction TFileComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵlistener(\"mouseenter\", function TFileComponent_div_9_Template_div_mouseenter_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.deleteHoverEnter());\n    })(\"mouseleave\", function TFileComponent_div_9_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.deleteHoverLeave());\n    })(\"click\", function TFileComponent_div_9_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.deleteFileClicked());\n    });\n    i0.ɵɵelementStart(1, \"span\", 21);\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Delete \", ctx_r7.file.name, \"\");\n  }\n}\nexport let TFileComponent = /*#__PURE__*/(() => {\n  class TFileComponent {\n    data;\n    file = {\n      name: \"/\",\n      isFolder: true,\n      size: 0,\n      createdOn: new Date(1970, 1, 1)\n    };\n    currentFolder = \"\";\n    newFolder = false;\n    fileDownLoad = new EventEmitter();\n    changeFolder = new EventEmitter();\n    createNewFolder = new EventEmitter();\n    cancelNewFolder = new EventEmitter();\n    deleteFileFolder = new EventEmitter();\n    getHref(filename) {\n      let fileWithPath = this.currentFolder + filename;\n      return this.data.getHref(fileWithPath);\n    }\n    fileIconMap = [[\".zip\", \"compress\"], [\".pdf\", \"picture_as_pdf\"], [\".doc\", \"notes\"], [\".txt\", \"notes\"], [\".jpg\", \"image\"], [\".png\", \"image\"], [\".html\", \"html\"], [\".js\", \"javascript\"], [\".css\", \"css\"], [\".c\", \"code\"], [\".cs\", \"code\"], [\".cpp\", \"code\"], [\".h\", \"code\"], [\".c\", \"code\"], [\".fs\", \"code\"], [\".ts\", \"code\"]];\n    newFolderName = \"\";\n    fileIcon = \"\";\n    getFileIcon(filename) {\n      let tp = this.fileIconMap.find(tup => filename.endsWith(tup[0]));\n      return tp ? tp[1] : \"description\";\n    }\n    constructor(data) {\n      this.data = data;\n    }\n    ngOnInit() {\n      if (!this.file.isFolder) this.fileIcon = this.getFileIcon(this.file.name);\n      if (this.newFolder) {\n        let elem = document.getElementById(\"newFolderNameInput\");\n        if (elem) {\n          elem.focus();\n        }\n      }\n    }\n    fileSizeStr(number) {\n      const oneKb = 1024;\n      const oneMb = oneKb * oneKb;\n      const oneGb = oneMb * oneKb;\n      const oneTb = oneGb * oneKb;\n      if (number < oneKb) {\n        return number + ' bytes';\n      }\n      if (number >= oneKb && number < oneMb) {\n        return (number / oneKb).toFixed(1) + ' KB';\n      }\n      if (number >= oneMb && number < oneGb) {\n        return (number / oneMb).toFixed(2) + ' MB';\n      }\n      if (number >= oneGb && number < oneTb) {\n        return (number / oneGb).toFixed(2) + ' GB';\n      }\n      if (number >= oneTb) {\n        return (number / oneTb).toFixed(2) + ' TB';\n      }\n      return '';\n    }\n    deleteFileClicked() {\n      let msg = this.file.isFolder ? `Delete Folder '${this.file.name}' and all its content ? ` : `Delete File '${this.file.name}' ?`;\n      const result = confirm(msg); // delete file / folder ?\n      if (result) {\n        this.deleteFileFolder.emit(this.file);\n      }\n    }\n    deleteHoverActive = false; // mouse is on the delete file icon\n    deleteHoverLeave() {\n      this.deleteHoverActive = false;\n    }\n    deleteHoverEnter() {\n      this.deleteHoverActive = true;\n    }\n    static ɵfac = function TFileComponent_Factory(t) {\n      return new (t || TFileComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TFileComponent,\n      selectors: [[\"app-tfile\"]],\n      inputs: {\n        file: \"file\",\n        currentFolder: \"currentFolder\",\n        newFolder: \"newFolder\"\n      },\n      outputs: {\n        fileDownLoad: \"fileDownLoad\",\n        changeFolder: \"changeFolder\",\n        createNewFolder: \"createNewFolder\",\n        cancelNewFolder: \"cancelNewFolder\",\n        deleteFileFolder: \"deleteFileFolder\"\n      },\n      decls: 10,\n      vars: 8,\n      consts: [[1, \"gridContainer\"], [1, \"fileIcon\"], [\"class\", \"fileDownLoadIcon\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"class\", \"material-icons iconSize\", 4, \"ngIf\"], [\"class\", \"fileName\", 3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"fileName\", 4, \"ngIf\"], [\"class\", \"fileSize\", 3, \"title\", 4, \"ngIf\"], [\"class\", \"createdOn\", 4, \"ngIf\"], [\"class\", \"delete\", 3, \"title\", \"mouseenter\", \"mouseleave\", \"click\", 4, \"ngIf\"], [1, \"fileDownLoadIcon\", 3, \"title\", \"click\"], [1, \"material-icons-outlined\"], [1, \"material-icons\", \"iconSize\"], [1, \"fileName\", 3, \"ngClass\"], [3, \"title\", \"click\", 4, \"ngIf\"], [3, \"title\", \"click\"], [1, \"fileName\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"newFolderName\", \"id\", \"newFolderNameInput\", \"placeholder\", \"Untitled folder\", \"autofocus\", \"\", 1, \"newFolderEdit\", \"t2elem\", 3, \"ngModel\", \"ngModelChange\"], [1, \"createButton\", 3, \"click\"], [1, \"fileSize\", 3, \"title\"], [1, \"createdOn\"], [1, \"delete\", 3, \"title\", \"mouseenter\", \"mouseleave\", \"click\"], [1, \"material-icons-outlined\", \"deleteIcon\"]],\n      template: function TFileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtemplate(2, TFileComponent_span_2_Template, 3, 1, \"span\", 2)(3, TFileComponent_span_3_Template, 2, 0, \"span\", 3)(4, TFileComponent_span_4_Template, 2, 1, \"span\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, TFileComponent_div_5_Template, 3, 5, \"div\", 4)(6, TFileComponent_div_6_Template, 7, 1, \"div\", 5)(7, TFileComponent_div_7_Template, 2, 2, \"div\", 6)(8, TFileComponent_div_8_Template, 2, 3, \"div\", 7)(9, TFileComponent_div_9_Template, 3, 1, \"div\", 8);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.file.isFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.file.isFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.file.isFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.newFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.newFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.newFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.newFolder);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.newFolder);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel],\n      styles: [\"body[_ngcontent-%COMP%]{height:100%;font-family:Roboto,Helvetica,sans-serif;background-repeat:no-repeat}div[_ngcontent-%COMP%]{font-family:Roboto,Helvetica,sans-serif}h1[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-left:10px;margin-top:10px;font-size:32pt;font-stretch:ultra-expanded;font-weight:100}.subtitle[_ngcontent-%COMP%]{margin-left:10px;margin-bottom:10px;font-size:14pt;font-stretch:ultra-expanded;font-weight:100}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.t5group[_ngcontent-%COMP%]{display:grid;height:100%;grid-column-gap:10px;grid-template-columns:4rem 16rem auto;grid-template-areas:\\\"t1elem t2elem t5elem\\\" \\\"t3elem t4elem .\\\"}.t4group[_ngcontent-%COMP%]{display:grid;height:100%;grid-column-gap:10px;grid-template-columns:4rem 16rem;grid-template-areas:\\\"t1elem t2elem \\\" \\\"t3elem t4elem \\\"}.t1elem[_ngcontent-%COMP%]{grid-area:t1elem;margin:0;align-self:end}label.t1elem[_ngcontent-%COMP%]{font-size:14px;color:#556b2f}.t2elem[_ngcontent-%COMP%]{grid-area:t2elem;padding-right:.5rem;padding-left:.5rem;align-self:end}textarea.t2elem[_ngcontent-%COMP%], input.t2elem[_ngcontent-%COMP%]{background:transparent;border-bottom:1px solid #42a948;border-left:0px;border-right:0px;border-top:0px;border-radius:0}.t3elem[_ngcontent-%COMP%]{grid-area:t3elem;font-size:14px;margin:0;align-self:end}.t4elem[_ngcontent-%COMP%]{grid-area:t4elem;align-self:end;justify-self:center}.t5elem[_ngcontent-%COMP%]{grid-area:t5elem;align-self:start;justify-self:left}.aligncenter[_ngcontent-%COMP%]{align-self:center;text-align:center}.alignleft[_ngcontent-%COMP%]{align-self:start;text-align:left;justify-self:left}.alignright[_ngcontent-%COMP%]{text-align:right;justify-self:right}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-column-gap:10px;grid-row-gap:10px;align-items:center;grid-template-columns:10vw 20vw 10vw 12vw 1vw;grid-template-areas:\\\"fileIcon  fileName   fileSize createdOn delete\\\"}.delete[_ngcontent-%COMP%]{grid-area:delete;text-align:left}.delete[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .fileDownLoadIcon[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#006400;cursor:pointer}.deleteIcon[_ngcontent-%COMP%]{font-size:18px;color:#8e9d25}.fileIcon[_ngcontent-%COMP%]{grid-area:fileIcon;text-align:right;color:#b8860b}.iconSize[_ngcontent-%COMP%]{font-size:20px}.fileName[_ngcontent-%COMP%]{grid-area:fileName;text-align:left;font-size:14px;text-decoration:underline;color:#2f4f4f;cursor:pointer}.fileName.mouseOnDeleteIcon[_ngcontent-%COMP%]{text-decoration:none;font-weight:700;color:#ff5733}.fileSize[_ngcontent-%COMP%]{grid-area:fileSize;text-align:right;font-size:14px;color:#2f4f4f}.createdOn[_ngcontent-%COMP%]{grid-area:createdOn;text-align:left;font-size:14px;color:#2f4f4f}.createButton[_ngcontent-%COMP%]{margin:5px}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:none}\"]\n    });\n  }\n  return TFileComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}